/**
 * Panda.js
 * Extendable Client side syntax highlighter core javascript and API. No languages included.
 *
 * Copyright 2011-2012 AvacWeb (avacweb.com)
 * Released under the MIT and GPL Licenses.
 */
(function(){function n(b,a){return a?b.replace(/\r?\n/g,"<br/>"):b.replace(/\<br\s?\/?\>/gi,"\n")}function k(b,a){return'<span clapanda="'+b+'">'+a+"</span>"}function p(b,a,c){return b.replace(RegExp("\\b(?:"+a.join("|")+")\\b","g"),function(a){return k(c,a)})}var e={cacheIdentity:!0,installedLanguages:[],languages:{},regex:{comment1:/\/\/[^\n]*/g,comment2:/\/\*(.|[\n\r])*?\*\//gm,comment3:/#[^\n]*/g,string:/(['"])(?:\\?.)*?\1/g,operators:/[!=\+%\*\-][!=\+\-]?|&(?:amp;){2}|&gt;|&lt;|(?:\|\|)/g,extra:/[:\{\}\[\]\(\)]/g},parse:function(b,a){var c=e.languages[b];if(!c)return a;var d=c.matchers,g=c.keywords,q=c.specials,s=(new Date).getTime(),r={};a=n(a).replace(/\</g,"&lt;").replace(/>/g,"&gt;").replace(/&nbsp;/g," ");for(var j=0,t=0,f;f=d[j++];){var h=this.regex[f],u="\u00a3panda_"+f+"_"+s+"_",v=r[f]={},m=!1;h&&(h.inner&&(m=h.inner,h=h.outer),a=a.replace(h,function(a){var b=u+t++ +"_"+(h.multiline?"m_":"")+"panda\u00a3";if(m){var c="panda-"+f,e=m,d;for(d in e)a=a.replace(e[d],function(a){return k(c+"-"+d,a)})}v[b]=a;return b}))}g.length&&(a=p(a,g,"panda-keyword"));q.length&&(a=p(a,q,"panda-special"));c.noints||(a=a.replace(/\b\d+(?:\.\d+)?\b/g,function(a){return k("panda-int",a)}));for(j=d.length;j;j--){f=d[j-1];var c=r[f],l;for(l in c)g=c[l],l.indexOf("_m_")&&(g=g.replace(/\n/g,'</span>\n<span clapanda="panda-'+f+'">')),a=a.replace(l,k("panda-"+f,g))}a=a.replace(/ /g,"&nbsp;").replace(/&nbsp;clapanda=/g," class=").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;");d='<ol><li class="panda-line">'+a.split(/\n/).join('</li><li class="panda-line">')+"</li></ol>";return n(d,1)},identify:function(b){if(b.pandaType)return b.pandaType;var a=/(?:\s|^)panda[_-](\w+)(?:\s|$)/;return a.test(b.className)?a.exec(b.className)[1]:"default"},colorNode:function(b){var a=e.identify(b);e.cacheIdentity&&(b.pandaType=a);b.className+=" panda-code panda-"+a;b.innerHTML=e.parse(a,b.innerHTML)},addSpecials:function(b,a){this.addKeywords(b,a,!0)},addKeywords:function(b,a,c){if(b in e)for(var d=0,g=a.length;d<g;d++)e.languages[b][c?"specials":"keywords"].push(a[d])},addLang:function(b,a){if("matchers"in a){var c=e.languages[b]={};e.installedLanguages.push(b);c.matchers="string"==typeof a.matchers?a.matchers.split(" "):a.matchers;c.specials=("string"==typeof a.specials?a.specials.split(" "):a.specials)||[];c.keywords=("string"==typeof a.keywords?a.keywords.split(" "):a.keywords)||[];if(a.regex&&"object"==typeof a.regex)for(var d in a.regex)e.regex[d]=a.regex[d]}}};window.panda=e;e.addLang("default",{matchers:["string"],keywords:"var for while if else elseif function def class try catch return true false continue break case default delete switch in as null typeof sizeof null int char bool boolean long double float enum import struct signed unsigned",specials:["document"]});e.onload=function(){for(var b=document.getElementsByTagName("code"),a=0,c;c=b[a++];)e.colorNode(c)}})();
