/* 
* Panda Syntax Highlighter
* Created by LGforum @ AvacWeb (avacweb.com)
* AvacWeb Copyright 2011-2012
* All Right Reserved.
* No unauthorized distrubution or copying.
*/
(function(){function f(a,e){return'<span class="'+a+'">'+e+"</span>"}function k(a){return a.replace(/\W(?!_\d+_)(\d+)(?!\d+#)/g,function(a,b){return a.replace(b,f("pandaInt",b))})}function l(a){return a.replace(/(&&|==|!==?|\|\|)/g,function(a){return f("pandaOperator",a)})}function h(a,e,b){return a.replace(RegExp("(\\W)"+e+"(\\W)","g"),function(a){return a.replace(e,f(b,e))})}function i(a,b){return a.replace(/\\(['"])/g,function(a,d){return"#escape_"+('"'==d?"d":"s")+"_"+b+"#"})}function j(a,b){a=a.replace(RegExp("#escape_d_"+b+"#","g"),'\\"');return a=a.replace(RegExp("#escape_s_"+b+"#","g"),"\\'")}var b={store:{comments:{},strings:{}},code:null,js:{reserved:{"var":1,"function":1,"return":1,"if":1,"else":1,"while":1,"do":1,"this":1,"new":1,"typeof":1,"for":1},custom:{document:"pandaOther",window:"pandaOther","null":"pandaOther","false":"pandaOther","true":"pandaOther",Array:"pandaFunc",RegExp:"pandaFunc",Object:"pandaFunc"},addCustom:function(a,b){this.custom[a]=b}},start:function(a){this.code&&this.end();this.uid=(new Date).getTime();this.code=a.innerHTML;this.node=a;return this},strip:function(a){var e=this.uid,c=0,d=0,a=i(a,e),a=a.replace(/([^:]|^)\/\/(?:.(?!\<br\s?\/?\>|\n))+./g,function(a){var c="#comment_"+d++ +"_"+e+"#",f=a.charAt(0);"/"!=f?a=a.substr(1):f="";b.store.comments[c]=a;return f+c}),a=a.replace(/\/\*(?:[\s\S](?!\*\/))*.\*\//g,function(a){var c="#comment_"+d++ +"_"+e+"#";b.store.comments[c]=a;return c});return a=a.replace(/'[^']*'|"[^"]*"/g,function(a){var d="#string_"+c++ +"_"+e+"#";b.store.strings[d]=a;return d})},returnStore:function(a){var b=this.uid,c=this.store,d;for(d in c.strings)a=a.replace(d,f("pandaString",c.strings[d]));for(var g in c.comments)d=c.comments[g],d=d.split(/(?:\<br\s?\/?\>|\n)/).join('</span><br /><span class="pandaComment">'),a=a.replace(g,f("pandaComment",d));return j(a,b)}};b.js.parse=function(a){this.code||b.start(a);var a=b.code,e=b.js.reserved,c=b.js.custom,a=b.strip(a),a=a.replace(/([=\.\[\]])/g,'<span class="pandaReserved">$1</span>'),a=k(a),a=l(a),d;for(d in e)a=h(a,d,"pandaReserved");for(d in c)a=h(a,d,c[d]);return b.returnStore(a)};b.insert=function(a,e,c){c&&(a='<ol class="pandaCode"><li>'+a.split(/(?:\<br\s?\/?\>(?!\<\/span\>)|\n)/).join("</li><li>")+"</li></ol>");e.innerHTML=a;b.end()};b.end=function(){this.node=this.code=null;this.store={strings:{},comments:{}}};b.html={parse:function(a){this.code||b.start(a);var a=b.code,e=b.uid,c={},d=0,a=i(a,e),a=a.replace(/&lt;!?--(?:.(?!--&gt;|--\>))*.(?:--&gt;|--\>)/g,function(a){var b="#comment_"+d++ +"_"+e+"#";c[b]=a;return b}),a=a.replace(/&lt;(?:.(?!&gt;|\>))+.(?:&gt;|\>)/g,function(a){return/^&lt;\/?a(\s|\>|&gt;)/.test(a)?(a=a.replace(/"[^"]+"|'[^']+'/g,function(a){return f("pandaTag",a)}),f("pandaAnchor",a)):f("pandaTag",a)}),g;for(g in c)a=a.replace(g,f("pandaComment",c[g]));return j(a,e)}};b.css={parse:function(a){this.code||b.start(a);a=b.code;a=b.strip(a);a=a.replace(/[^\{\}]+\{/g,function(a){return a.replace(/(.*(?:\<br\s?\/?\>|\n))*(.+)/,'$1<span class="pandaOther">$2</span>')});a=a.replace(/([\{\}]|:(?!\w))/g,'<span class="pandaFunc">$1</span>');return b.returnStore(a)}};b.parse=function(a,e,c){a=b[a].parse(e);b.insert(a,e,c);b.end()};"object"===typeof module&&"object"===typeof module.exports?module.exports=b:window.panda=b})();